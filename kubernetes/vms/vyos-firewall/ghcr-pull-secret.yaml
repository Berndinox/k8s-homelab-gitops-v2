---
# GHCR Pull Secret für privates vyos-image-builder Container Image
#
# SOPS-Verschlüsselung erforderlich — NIEMALS unverschlüsselt committen!
#
# Vorbereitung (einmalig):
#   1. GitHub PAT erstellen:
#      GitHub → Settings → Developer settings → Personal access tokens (classic)
#      Scopes: read:packages
#
#   2. dockerconfigjson generieren:
#      AUTH=$(echo -n "berndinox:<PAT>" | base64 -w0)
#      echo "{\"auths\":{\"ghcr.io\":{\"auth\":\"$AUTH\"}}}" | base64 -w0
#
#   3. Dieses File befüllen (data..dockerconfigjson = Output aus Schritt 2)
#
#   4. Mit SOPS verschlüsseln:
#      sops -e -i kubernetes/vms/vyos-firewall/ghcr-pull-secret.yaml
#
#   5. Committen → ArgoCD decryptet automatisch (via SOPS-Plugin)
#
apiVersion: v1
kind: Secret
metadata:
  name: ghcr-pull-secret
  namespace: vms
type: kubernetes.io/dockerconfigjson
data:
  # SOPS-verschlüsseln! Aktuell Platzhalter:
  .dockerconfigjson: PLACEHOLDER_BASE64_DOCKERCONFIG
